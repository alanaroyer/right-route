<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rota Certa - Gest√£o de Transporte Escolar</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="style.css">
</head>
<body class="bg">
    <!-- Notification -->
    <div id="notification.show" class="notification"></div>

<!--========================  Header  ===========================-->
    <header class="app-header">
        <div class="header-container">
            <div class="logo-container">
                <div class="logo-icon">
                    <span>üöê</span>
                </div>
                <div class="logo-text">
                    <h1>Rota Certa</h1>
                    <p>Gest√£o de Transporte Escolar</p>
                </div>
            </div>
            <div class="header-actions">
                <button onclick="toggleTheme()" class="theme-btn">
                    <span class="theme-icon">üåô</span>
                </button>
                <button onclick="refreshApp()" class="refresh-btn">
                    <span>üîÑ</span>
                </button>
            </div>
        </div>
    </header>

    <!-- Mobile Menu Button -->
    <div class="mobile-menu-btn">
        <button id="mobileMenuBtn" onclick="toggleMobileMenu()">
            <span>‚ò∞</span>
        </button>
    </div>

<!-- Mobile Overlay -->
<div id="mobileOverlay" class="mobile-overlay"></div>
    <div class="flex">
        <!-- Sidebar -->
        <aside id="sidebar" class="sidebar">
            <nav class="sidebar-nav">
                <ul class="sidebar-list">
                    <li>
                        <button onclick="showSection('dashboard')" class="sidebar-btn sidebar-active">
                            <span>üìä</span>
                            <span>Dashboard</span>
                        </button>
                    </li>
                    <li>
                        <button onclick="showSection('passageiros')" class="sidebar-btn">
                            <span>üë•</span>
                            <span>Passageiros</span>
                        </button>
                    </li>
                    <li>
                        <button onclick="showSection('financeiro')" class="sidebar-btn">
                            <span>üí∞</span>
                            <span>Financeiro</span>
                        </button>
                    </li>
                    <li>
                        <button onclick="showSection('comunicacao')" class="sidebar-btn">
                            <span>üì±</span>
                            <span>Comunica√ß√£o</span>
                        </button>
                    </li>
                    <li>
                        <button onclick="showSection('configuracoes')" class="sidebar-btn">
                            <span>‚öôÔ∏è</span>
                            <span>Configura√ß√µes</span>
                        </button>
                    </li>
                </ul>
            </nav>
        </aside>

        <main class="main-content">
            <!-- Dashboard Section -->
            <div id="dashboard" class="section">
                <header class="page-header">
                    <h2 class="page-title">Dashboard</h2>
                    <p class="page-subtitle">Vis√£o geral do seu neg√≥cio</p>
                </header>
                <div class="stats-grid">
                    <div class="card card-hover">
                        <div class="stat-card__content">
                            <div class="stat-card__details">
                                <p class="stat-card__label">Passageiros Cadastrados</p>
                                <p id="totalPassageirosDash" class="stat-card__value stat-card__value--primary">0</p>
                                <p class="stat-card__meta">total cadastrado</p>
                            </div>
                            <div class="stat-card__icon stat-card__icon--primary">
                                <span>üë•</span>
                            </div>
                        </div>
                    </div>
                    <div class="card card-hover">
                        <div class="stat-card__content">
                            <div class="stat-card__details">
                                <p class="stat-card__label">Receita Mensal</p>
                                <p id="receitaMensalDash" class="stat-card__value stat-card__value--success">R$ 0,00</p>
                                <p class="stat-card__meta">soma das mensalidades</p>
                            </div>
                            <div class="stat-card__icon stat-card__icon--success">
                                <span>üí∞</span>
                            </div>
                        </div>
                    </div>
                    <div class="card card-hover">
                        <div class="stat-card__content">
                            <div class="stat-card__details">
                                <p class="stat-card__label">Pagamentos Pendentes</p>
                                <p class="stat-card__value stat-card__value--warning">0</p>
                                <p class="stat-card__meta">R$ 0,00</p>
                            </div>
                            <div class="stat-card__icon stat-card__icon--warning">
                                <span>‚è∞</span>
                            </div>
                        </div>
                    </div>
                    <div class="card card-hover">
                        <div class="stat-card__content">
                            <div class="stat-card__details">
                                <p class="stat-card__label">Passageiros Ativos</p>
                                <p id="passageirosAtivosDash" class="stat-card__value stat-card__value--purple">0</p>
                                <p class="stat-card__meta">status ativo</p>
                            </div>
                            <div class="stat-card__icon stat-card__icon--purple">
                                <span>‚úÖ</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Recent Activity -->
                <div class="card">
                    <h3 class="card__title">Atividades Recentes</h3>
                    <div id="recentActivityList" class="activity-list">
                        <p class="activity-item__meta" style="text-align: center;">Nenhuma atividade recente para exibir.</p>
                    </div>
                </div>
            </div>

            <!-- passageiros section-->
            <div id="passageiros" class="section hidden">
                <header class="page-actions-header">
                    <div class="page-header" style="margin-bottom: 0;">
                        <h2 class="page-title">Gest√£o de Passageiros</h2>
                        <p class="page-subtitle">Controle completo dos seus passageiros</p>
                    </div>
                    <button onclick="openModal('novoPassageiro')" class="btn btn-primary">
                        <span>‚ûï</span>
                        <span>Novo Passageiro</span>
                    </button>
                </header>
                <div class="card mb-6">
                    <div class="filter-grid">
                        <div>
                            <label for="statusFilter" class="form-label">Status</label>
                            <select id="statusFilter" class="form-select">
                                <option value="">Todos os Status</option>
                                <option value="ativo">Ativo</option>
                                <option value="inativo">Inativo</option>
                                <option value="ferias">F√©rias</option>
                            </select>
                        </div>
                        <div>
                            <label for="escolaFilter" class="form-label">Escola</label>
                            <select id="escolaFilter" class="form-select">
                                <option value="">Todas as Escolas</option>
                                <option value="erico-verissimo">√ârico Ver√≠ssimo</option>
                                <option value="arruda">Arruda</option>
                                <option value="piero-sassi">Piero Sassi</option>
                            </select>
                        </div>
                        <div>
                            <label for="bairroFilter" class="form-label">Bairro</label>
                            <select id="bairroFilter" class="form-select">
                                <option value="">Todos os Bairros</option>
                                <option value="passo-dareia">Passo d'Areia</option>
                                <option value="conceicao">Concei√ß√£o</option>
                                <option value="alvorada">Alvorada</option>
                            </select>
                        </div>
                        <div>
                            <label for="searchInput" class="form-label">Buscar</label>
                            <input id="searchInput" type="text" placeholder="Nome do passageiro..." class="form-input">
                        </div>
                    </div>
                    <div class="filter-actions">
                        <button onclick="applyFilters()" class="btn btn-primary">
                            <span>üîç</span>
                            <span>Filtrar</span>
                        </button>
                        <button onclick="clearFilters()" class="btn btn-secondary">
                            <span>üóëÔ∏è</span>
                            <span>Limpar</span>
                        </button>
                        <button onclick="exportFilteredData()" class="btn btn-success">
                            <span>üì§</span>
                            <span>Exportar</span>
                        </button>
                    </div>
                    <div id="filterResults" class="mt-4 text-sm text-gray-600 hidden">
                        <span id="resultCount">0</span> passageiros encontrados
                    </div>
                </div>
            
                <div class="card" style="padding: 0;">
                    <div class="hidden lg:block data-table-wrapper">
                        <table class="data-table">
                            <thead class="data-table__header">
                                <tr>
                                    <th class="data-table__heading">Passageiro</th>
                                    <th class="data-table__heading">Respons√°vel</th>
                                    <th class="data-table__heading">Escola</th>
                                    <th class="data-table__heading">Status</th>
                                    <th class="data-table__heading">Mensalidade</th>
                                    <th class="data-table__heading">A√ß√µes</th>
                                </tr>
                            </thead>
                            <tbody class="data-table__body">
                                <tr class="data-table__empty-row">
                                    <td colspan="6" class="data-table__cell">
                                        <div class="empty-state">
                                            <span class="empty-state__icon">üë•</span>
                                            <p class="empty-state__title">Nenhum passageiro cadastrado</p>
                                            <p class="empty-state__text">Clique em "Novo Passageiro" para come√ßar</p>
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
            
                    <div class="lg:hidden">
                        <div class="empty-state">
                            <span class="empty-state__icon">üë•</span>
                            <p class="empty-state__title">Nenhum passageiro cadastrado</p>
                            <p class="empty-state__text">Clique em "Novo Passageiro" para come√ßar</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Financeiro Section -->
            <div id="financeiro" class="section hidden">
                <header class="page-header">
                    <h2 class="page-title">Gest√£o Financeira</h2>
                    <p class="page-subtitle">Controle completo das suas finan√ßas</p>
                </header>
            
                <div class="stats-grid">
                    <div class="card">
                        <header class="finance-card__header">
                            <h3 class="finance-card__title">Pagamentos em Dia</h3>
                            <span class="finance-card__icon">üí∞</span>
                        </header>
                        <p class="finance-card__value finance-card__value--success">R$ 0,00</p>
                        <p class="finance-card__meta">0 mensalidades</p>
                    </div>
            
                    <div class="card">
                        <header class="finance-card__header">
                            <h3 class="finance-card__title">Pend√™ncias</h3>
                            <span class="finance-card__icon">‚è∞</span>
                        </header>
                        <p class="finance-card__value finance-card__value--warning">R$ 0,00</p>
                        <p class="finance-card__meta">0 mensalidades</p>
                    </div>
            
                    <div class="card">
                        <header class="finance-card__header">
                            <h3 class="finance-card__title">Em Atraso</h3>
                            <span class="finance-card__icon">üö®</span>
                        </header>
                        <p class="finance-card__value finance-card__value--danger">R$ 0,00</p>
                        <p class="finance-card__meta">0 mensalidades</p>
                    </div>
                </div>
            
                <div class="card" style="padding: 0;">
                    <header class="card__header">
                        <h3 class="card__title" style="margin-bottom: 0;">Controle de Mensalidades</h3>
                        <button onclick="openModal('registrarPagamento')" class="btn btn-success">
                            Registrar Pagamento
                        </button>
                    </header>
                    <div class="data-table-wrapper">
                        <table class="data-table">
                            <thead class="data-table__header">
                                <tr>
                                    <th class="data-table__heading">Passageiro</th>
                                    <th class="data-table__heading">M√™s/Ano</th>
                                    <th class="data-table__heading">Valor</th>
                                    <th class="data-table__heading">Vencimento</th>
                                    <th class="data-table__heading">Status</th>
                                    <th class="data-table__heading">A√ß√µes</th>
                                </tr>
                            </thead>
                            <tbody class="data-table__body">
                                <tr>
                                    <td colspan="6" class="data-table__cell">
                                        <div class="empty-state">
                                            <span class="empty-state__icon">üìã</span>
                                            <p class="empty-state__title">Nenhuma mensalidade cadastrada</p>
                                            <p class="empty-state__text">Os pagamentos aparecer√£o aqui.</p>
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Comunica√ß√£o Section -->
            <div id="comunicacao" class="section hidden">
                <div class="mb-6">
                    <h2 class="text-3xl font-bold text-gray-800 mb-2">WhatsApp Business Integration</h2>
                    <p class="text-gray-600">Central completa de comunica√ß√£o automatizada</p>
                </div>

                <!-- WhatsApp Connection Setup -->
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
                    <div class="bg-white rounded-xl shadow-md p-6">
                        <h3 class="text-lg font-semibold mb-4 flex items-center space-x-2">
                            <span>üîó</span>
                            <span>Configura√ß√£o da Conex√£o</span>
                        </h3>
                        <div class="space-y-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">N√∫mero do WhatsApp
                                    Business</label>
                                <input type="tel" class="w-full border border-gray-300 rounded-lg px-4 py-2"
                                    placeholder="+55 11 99999-9999" value="+55 11 98765-4321">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Token da API</label>
                                <input type="password" class="w-full border border-gray-300 rounded-lg px-4 py-2"
                                    placeholder="Insira seu token da API" value="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Webhook URL</label>
                                <input type="url" class="w-full border border-gray-300 rounded-lg px-4 py-2"
                                    placeholder="https://seu-webhook.com" value="https://api.rotacerta.com/webhook">
                            </div>
                            <div class="flex space-x-2">
                                <button onclick="testConnection()"
                                    class="flex-1 bg-blue-600 hover:bg-blue-700 text-white py-2 rounded-lg">
                                    üîç Testar Conex√£o
                                </button>
                                <button onclick="saveConnection()"
                                    class="flex-1 bg-green-600 hover:bg-green-700 text-white py-2 rounded-lg">
                                    üíæ Salvar
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="bg-white rounded-xl shadow-md p-6">
                        <h3 class="text-lg font-semibold mb-4 flex items-center space-x-2">
                            <span>üìä</span>
                            <span>Status da Integra√ß√£o</span>
                        </h3>
                        <div class="space-y-4">
                            <div class="flex items-center justify-between p-3 bg-green-50 rounded-lg">
                                <div class="flex items-center space-x-3">
                                    <div class="w-3 h-3 bg-green-500 rounded-full"></div>
                                    <span class="font-medium">API Connection</span>
                                </div>
                                <span class="text-green-600 text-sm">Conectado</span>
                            </div>
                            <div class="flex items-center justify-between p-3 bg-green-50 rounded-lg">
                                <div class="flex items-center space-x-3">
                                    <div class="w-3 h-3 bg-green-500 rounded-full"></div>
                                    <span class="font-medium">Webhook</span>
                                </div>
                                <span class="text-green-600 text-sm">Ativo</span>
                            </div>
                            <div class="flex items-center justify-between p-3 bg-yellow-50 rounded-lg">
                                <div class="flex items-center space-x-3">
                                    <div class="w-3 h-3 bg-yellow-500 rounded-full"></div>
                                    <span class="font-medium">Business Verification</span>
                                </div>
                                <span class="text-yellow-600 text-sm">Pendente</span>
                            </div>
                            <div class="mt-4 p-3 bg-blue-50 rounded-lg">
                                <p class="text-sm text-blue-700">
                                    <strong>√öltima sincroniza√ß√£o:</strong> Hoje √†s 14:32<br>
                                    <strong>Mensagens enviadas hoje:</strong> 47<br>
                                    <strong>Taxa de entrega:</strong> 98.5%
                                </p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Advanced Features -->
                <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6">
                    <div class="bg-white rounded-xl shadow-md p-6">
                        <h3 class="text-lg font-semibold mb-4 flex items-center space-x-2">
                            <span>ü§ñ</span>
                            <span>Automa√ß√£o</span>
                        </h3>
                        <div class="space-y-3">
                            <div class="flex items-center justify-between">
                                <span class="text-sm">Auto-resposta</span>
                                <input type="checkbox" checked class="w-4 h-4 text-green-600 rounded">
                            </div>
                            <div class="flex items-center justify-between">
                                <span class="text-sm">Lembretes autom√°ticos</span>
                                <input type="checkbox" checked class="w-4 h-4 text-green-600 rounded">
                            </div>
                            <div class="flex items-center justify-between">
                                <span class="text-sm">Confirma√ß√£o de pagamento</span>
                                <input type="checkbox" checked class="w-4 h-4 text-green-600 rounded">
                            </div>
                            <div class="flex items-center justify-between">
                                <span class="text-sm">Relat√≥rios semanais</span>
                                <input type="checkbox" class="w-4 h-4 text-green-600 rounded">
                            </div>
                            <button onclick="configureAutomation()"
                                class="w-full mt-3 bg-purple-600 hover:bg-purple-700 text-white py-2 rounded-lg text-sm">
                                ‚öôÔ∏è Configurar Regras
                            </button>
                        </div>
                    </div>

                    <div class="bg-white rounded-xl shadow-md p-6">
                        <h3 class="text-lg font-semibold mb-4 flex items-center space-x-2">
                            <span>üìã</span>
                            <span>Templates</span>
                        </h3>
                        <div class="space-y-2">
                            <button onclick="manageTemplate('welcome')"
                                class="w-full text-left p-2 hover:bg-gray-50 rounded-lg text-sm">
                                üëã Mensagem de Boas-vindas
                            </button>
                            <button onclick="manageTemplate('reminder')"
                                class="w-full text-left p-2 hover:bg-gray-50 rounded-lg text-sm">
                                ‚è∞ Lembrete de Vencimento
                            </button>
                            <button onclick="manageTemplate('overdue')"
                                class="w-full text-left p-2 hover:bg-gray-50 rounded-lg text-sm">
                                üö® Cobran√ßa de Atraso
                            </button>
                            <button onclick="manageTemplate('receipt')"
                                class="w-full text-left p-2 hover:bg-gray-50 rounded-lg text-sm">
                                üßæ Confirma√ß√£o de Pagamento
                            </button>
                            <button onclick="manageTemplate('holiday')"
                                class="w-full text-left p-2 hover:bg-gray-50 rounded-lg text-sm">
                                üèñÔ∏è Aviso de F√©rias
                            </button>
                            <button onclick="createNewTemplate()"
                                class="w-full mt-3 bg-blue-600 hover:bg-blue-700 text-white py-2 rounded-lg text-sm">
                                ‚ûï Criar Novo Template
                            </button>
                        </div>
                    </div>

                    <div class="bg-white rounded-xl shadow-md p-6">
                        <h3 class="text-lg font-semibold mb-4 flex items-center space-x-2">
                            <span>üìà</span>
                            <span>Analytics</span>
                        </h3>
                        <div class="space-y-3">
                            <div class="flex justify-between items-center">
                                <span class="text-sm text-gray-600">Mensagens hoje</span>
                                <span class="font-semibold">47</span>
                            </div>
                            <div class="flex justify-between items-center">
                                <span class="text-sm text-gray-600">Taxa de entrega</span>
                                <span class="font-semibold text-green-600">98.5%</span>
                            </div>
                            <div class="flex justify-between items-center">
                                <span class="text-sm text-gray-600">Taxa de leitura</span>
                                <span class="font-semibold text-blue-600">87.2%</span>
                            </div>
                            <div class="flex justify-between items-center">
                                <span class="text-sm text-gray-600">Respostas recebidas</span>
                                <span class="font-semibold">23</span>
                            </div>
                            <button onclick="viewDetailedAnalytics()"
                                class="w-full mt-3 bg-indigo-600 hover:bg-indigo-700 text-white py-2 rounded-lg text-sm">
                                üìä Relat√≥rio Completo
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Message Templates -->
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
                    <div class="bg-white rounded-xl shadow-md p-6">
                        <h3 class="text-lg font-semibold mb-4">Modelos de Mensagem</h3>
                        <div class="space-y-4">
                            <div class="border border-gray-200 rounded-lg p-4">
                                <div class="flex justify-between items-start mb-2">
                                    <h4 class="font-medium">Lembrete de Vencimento</h4>
                                    <button onclick="editTemplate('lembrete')"
                                        class="text-blue-600 hover:text-blue-800">‚úèÔ∏è</button>
                                </div>
                                <p class="text-sm text-gray-600">Ol√° {nome_responsavel}! A mensalidade do(a)
                                    {nome_passageiro} vence em {dias} dias. Valor: R$ {valor}.</p>
                            </div>
                            <div class="border border-gray-200 rounded-lg p-4">
                                <div class="flex justify-between items-start mb-2">
                                    <h4 class="font-medium">Cobran√ßa de Atraso</h4>
                                    <button onclick="editTemplate('cobranca')"
                                        class="text-blue-600 hover:text-blue-800">‚úèÔ∏è</button>
                                </div>
                                <p class="text-sm text-gray-600">Ol√° {nome_responsavel}! A mensalidade do(a)
                                    {nome_passageiro} est√° em atraso. Por favor, regularize o pagamento.</p>
                            </div>
                            <div class="border border-gray-200 rounded-lg p-4">
                                <div class="flex justify-between items-start mb-2">
                                    <h4 class="font-medium">Confirma√ß√£o de Pagamento</h4>
                                    <button onclick="editTemplate('confirmacao')"
                                        class="text-blue-600 hover:text-blue-800">‚úèÔ∏è</button>
                                </div>
                                <p class="text-sm text-gray-600">Pagamento confirmado! Obrigado por manter a mensalidade
                                    do(a) {nome_passageiro} em dia.</p>
                            </div>
                        </div>
                    </div>

                    <div class="bg-white rounded-xl shadow-md p-6">
                        <h3 class="text-lg font-semibold mb-4">Envio de Mensagens</h3>
                        <div class="space-y-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Tipo de Mensagem</label>
                                <select class="w-full border border-gray-300 rounded-lg px-4 py-2">
                                    <option>Lembrete de Vencimento</option>
                                    <option>Cobran√ßa de Atraso</option>
                                    <option>Confirma√ß√£o de Pagamento</option>
                                    <option>Mensagem Personalizada</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Destinat√°rios</label>
                                <select class="w-full border border-gray-300 rounded-lg px-4 py-2">
                                    <option>Todos os Respons√°veis</option>
                                    <option>Apenas Pend√™ncias</option>
                                    <option>Apenas Atrasos</option>
                                    <option>Selecionar Espec√≠ficos</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Mensagem</label>
                                <textarea class="w-full border border-gray-300 rounded-lg px-4 py-2 h-24"
                                    placeholder="Digite sua mensagem..."></textarea>
                            </div>
                            <button onclick="sendBulkMessage()"
                                class="w-full bg-green-600 hover:bg-green-700 text-white py-3 rounded-lg font-medium">
                                üì± Enviar Mensagens
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Message History -->
                <div class="bg-white rounded-xl shadow-md p-6">
                    <h3 class="text-lg font-semibold mb-4">Hist√≥rico de Mensagens</h3>
                    <div class="space-y-4">
                        <div class="flex items-center space-x-4 p-4 bg-gray-50 rounded-lg">
                            <div class="w-10 h-10 bg-green-100 rounded-full flex items-center justify-center">
                                <span class="text-green-600">‚úì</span>
                            </div>
                            <div class="flex-1">
                                <p class="font-medium">Lembrete enviado para Maria Silva</p>
                                <p class="text-sm text-gray-500">Mensalidade Ana Silva - Hoje √†s 14:30</p>
                            </div>
                            <span class="text-sm text-green-600">Entregue</span>
                        </div>
                        <div class="flex items-center space-x-4 p-4 bg-gray-50 rounded-lg">
                            <div class="w-10 h-10 bg-orange-100 rounded-full flex items-center justify-center">
                                <span class="text-orange-600">‚è≥</span>
                            </div>
                            <div class="flex-1">
                                <p class="font-medium">Cobran√ßa enviada para Ana Oliveira</p>
                                <p class="text-sm text-gray-500">Mensalidade Maria Oliveira - Ontem √†s 09:15</p>
                            </div>
                            <span class="text-sm text-orange-600">Pendente</span>
                        </div>
                        <div class="flex items-center space-x-4 p-4 bg-gray-50 rounded-lg">
                            <div class="w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center">
                                <span class="text-blue-600">üìÑ</span>
                            </div>
                            <div class="flex-1">
                                <p class="font-medium">Recibo enviado para Jo√£o Santos</p>
                                <p class="text-sm text-gray-500">Pagamento Carlos Santos - 2 dias atr√°s</p>
                            </div>
                            <span class="text-sm text-green-600">Entregue</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Configura√ß√µes Section -->
            <div id="configuracoes" class="section hidden">
                <div class="mb-6">
                    <h2 class="text-3xl font-bold text-gray-800 mb-2">Configura√ß√µes do Sistema</h2>
                    <p class="text-gray-600">Personalize e configure seu aplicativo</p>
                </div>

                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <!-- Configura√ß√µes de Tema -->
                    <div class="bg-white rounded-xl shadow-md p-6">
                        <h3 class="text-xl font-semibold mb-4 flex items-center space-x-2">
                            <span>üé®</span>
                            <span>Tema</span>
                        </h3>
                        <div class="space-y-4">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="font-medium">Modo Escuro</p>
                                    <p class="text-sm text-gray-500">Ativar tema escuro para reduzir o cansa√ßo visual
                                    </p>
                                </div>
                                <button onclick="toggleTheme()"
                                    class="theme-toggle w-12 h-6 bg-gray-300 rounded-full p-1 flex items-center">
                                    <div
                                        class="toggle-circle w-4 h-4 bg-white rounded-full shadow-md flex items-center justify-center">
                                        <span class="text-xs">üåô</span>
                                    </div>
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Configura√ß√µes de Performance -->
                    <div class="bg-white rounded-xl shadow-md p-6">
                        <h3 class="text-xl font-semibold mb-4 flex items-center space-x-2">
                            <span>‚ö°</span>
                            <span>Performance</span>
                        </h3>
                        <div class="space-y-4">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="font-medium">Anima√ß√µes</p>
                                    <p class="text-sm text-gray-500">Ativar anima√ß√µes e transi√ß√µes suaves</p>
                                </div>
                                <input type="checkbox" checked class="w-5 h-5 text-blue-600 rounded">
                            </div>
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="font-medium">Carregamento R√°pido</p>
                                    <p class="text-sm text-gray-500">Otimizar velocidade de carregamento</p>
                                </div>
                                <input type="checkbox" checked class="w-5 h-5 text-blue-600 rounded">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Itens por P√°gina</label>
                                <select class="w-full border border-gray-300 rounded-lg px-4 py-2">
                                    <option>10</option>
                                    <option>25</option>
                                    <option selected>50</option>
                                    <option>100</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <!-- Configura√ß√µes de Notifica√ß√£o -->
                    <div class="bg-white rounded-xl shadow-md p-6">
                        <h3 class="text-xl font-semibold mb-4 flex items-center space-x-2">
                            <span>üîî</span>
                            <span>Notifica√ß√µes</span>
                        </h3>
                        <div class="space-y-4">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="font-medium">Lembretes de Vencimento</p>
                                    <p class="text-sm text-gray-500">Notificar sobre mensalidades pr√≥ximas ao vencimento
                                    </p>
                                </div>
                                <input type="checkbox" checked class="w-5 h-5 text-blue-600 rounded">
                            </div>
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="font-medium">Pagamentos Recebidos</p>
                                    <p class="text-sm text-gray-500">Notificar quando um pagamento for confirmado</p>
                                </div>
                                <input type="checkbox" checked class="w-5 h-5 text-blue-600 rounded">
                            </div>
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="font-medium">Novos Passageiros</p>
                                    <p class="text-sm text-gray-500">Notificar sobre novos cadastros</p>
                                </div>
                                <input type="checkbox" class="w-5 h-5 text-blue-600 rounded">
                            </div>
                        </div>
                    </div>

                    <!-- Configura√ß√µes de Backup -->
                    <div class="bg-white rounded-xl shadow-md p-6">
                        <h3 class="text-xl font-semibold mb-4 flex items-center space-x-2">
                            <span>üíæ</span>
                            <span>Backup e Dados</span>
                        </h3>
                        <div class="space-y-4">
                            <div>
                                <p class="font-medium mb-2">Backup Autom√°tico</p>
                                <p class="text-sm text-gray-500 mb-3">Seus dados s√£o salvos automaticamente no navegador
                                </p>
                                <div class="flex space-x-2">
                                    <button onclick="exportData()"
                                        class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm">
                                        üì§ Exportar Dados
                                    </button>
                                    <button onclick="importData()"
                                        class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg text-sm">
                                        üì• Importar Dados
                                    </button>
                                </div>
                            </div>
                            <div class="border-t border-gray-200 pt-4">
                                <p class="font-medium mb-2 text-red-600">Zona de Perigo</p>
                                <button onclick="clearAllData()"
                                    class="bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg text-sm">
                                    üóëÔ∏è Limpar Todos os Dados
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Bot√£o de Aplicar Configura√ß√µes -->
                <div class="mt-6 flex justify-center">
                    <button onclick="applySettings()"
                        class="bg-green-600 hover:bg-green-700 text-white px-8 py-3 rounded-lg font-medium flex items-center space-x-2">
                        <span>‚úÖ</span>
                        <span>Aplicar Todas as Configura√ß√µes</span>
                    </button>
                </div>
            </div>
        </main>
    </div>

    <!-- Modal: Novo Passageiro -->
    <div id="novoPassageiro" class="modal">
        <div class="bg-white rounded-xl shadow-xl p-6 w-full max-w-4xl mx-4 max-h-[90vh] overflow-y-auto">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-xl font-semibold">Novo Cadastro de Passageiros</h3>
                <button onclick="openModal('novoPassageiro')" class="btn btn-primary">
                    <span>‚ûï</span>
                    <span>Novo Passageiro</span>
                </button>
            </div>
            <form class="space-y-6">
                <!-- Dados do Respons√°vel -->
                <div class="bg-blue-50 rounded-lg p-4">
                    <h4 class="text-lg font-semibold mb-4 flex items-center space-x-2">
                        <span>üë§</span>
                        <span>Dados do Respons√°vel</span>
                    </h4>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Nome do Respons√°vel *</label>
                            <input id="nomeResponsavel" type="text"
                                class="w-full border border-gray-300 rounded-lg px-4 py-2"
                                placeholder="Nome do respons√°vel" required>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Telefone *</label>
                            <input id="telefoneResponsavel" type="tel"
                                class="w-full border border-gray-300 rounded-lg px-4 py-2" placeholder="(11) 99999-9999"
                                required>
                        </div>
                    </div>
                    <div class="mt-4">
                        <label class="block text-sm font-medium text-gray-700 mb-2">Endere√ßo *</label>
                        <input id="enderecoResponsavel" type="text"
                            class="w-full border border-gray-300 rounded-lg px-4 py-2" placeholder="Endere√ßo completo"
                            required>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Bairro *</label>
                            <select id="bairroResponsavel" class="w-full border border-gray-300 rounded-lg px-4 py-2"
                                required>
                                <option value="">Selecione o bairro</option>
                                <option value="passo-dareia">Passo d'Areia</option>
                                <option value="conceicao">Concei√ß√£o</option>
                                <option value="alvorada">Alvorada</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Valor Base da Mensalidade
                                *</label>
                            <input id="valorBaseMensalidade" type="text"
                                class="w-full border border-gray-300 rounded-lg px-4 py-2" placeholder="R$ 200,00"
                                required>
                        </div>
                    </div>
                </div>

                <!-- Passageiros -->
                <div class="bg-green-50 rounded-lg p-4">
                    <div class="flex justify-between items-center mb-4">
                        <h4 class="text-lg font-semibold flex items-center space-x-2">
                            <span>üë∂</span>
                            <span>Passageiros</span>
                        </h4>
                        <button type="button" onclick="addPassageiro()"
                            class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg text-sm flex items-center space-x-2">
                            <span>‚ûï</span>
                            <span>Adicionar Passageiro</span>
                        </button>
                    </div>

                    <div id="passageirosList">
                        <!-- Primeiro passageiro (sempre presente) -->
                        <div class="passageiro-item border border-gray-200 rounded-lg p-4 mb-4 bg-white">
                            <div class="flex justify-between items-center mb-3">
                                <h5 class="font-medium text-gray-800">1¬∫ Passageiro</h5>
                            </div>
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                <div>
                                    <label class="form-label">Nome Completo *</label>
                                    <input type="text" class="form-input passageiro-nome" placeholder="Nome completo" required>
                                    </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Idade *</label>
                                    <input type="number"
                                        class="passageiro-idade w-full border border-gray-300 rounded-lg px-4 py-2"
                                        placeholder="Idade" min="3" max="18" required>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Escola *</label>
                                    <select class="passageiro-escola w-full border border-gray-300 rounded-lg px-4 py-2"
                                        required>
                                        <option value="">Selecione a escola</option>
                                        <option value="erico-verissimo">√ârico Ver√≠ssimo</option>
                                        <option value="arruda">Arruda</option>
                                        <option value="piero-sassi">Piero Sassi</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Resumo Financeiro -->
                <div class="bg-yellow-50 rounded-lg p-4">
                    <h4 class="text-lg font-semibold mb-4 flex items-center space-x-2">
                        <span>üí∞</span>
                        <span>Resumo Financeiro</span>
                    </h4>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div class="text-center">
                            <p class="text-sm text-gray-600">Total de Passageiros</p>
                            <p id="totalPassageiros" class="text-2xl font-bold text-blue-600">1</p>
                        </div>
                        <div class="text-center">
                            <p class="text-sm text-gray-600">Valor Total Mensal</p>
                            <p id="valorTotalMensal" class="text-2xl font-bold text-green-600">R$ 0,00</p>
                        </div>
                    </div>
                    <div class="mt-4 p-3 bg-blue-100 rounded-lg">
                        <p class="text-sm text-blue-800">
                            <strong>üí° Informa√ß√£o:</strong><br>
                            O valor da mensalidade ser√° aplicado igualmente para todos os passageiros desta fam√≠lia.
                        </p>
                    </div>
                </div>

                <div class="flex justify-end space-x-4 pt-4">
                    <button type="button" onclick="closeModal('novoPassageiro')"
                        class="px-6 py-2 border border-gray-300 rounded-lg hover:bg-gray-50">Cancelar</button>
                    <button type="submit" onclick="savePassageiroFamily()"
                        class="px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700">Salvar Fam√≠lia</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal: Registrar Pagamento -->
    <div id="registrarPagamento" class="modal">
        <div class="bg-white rounded-xl shadow-xl p-6 w-full max-w-md mx-4">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-xl font-semibold">Registrar Pagamento</h3>
                <button onclick="closeModal('registrarPagamento')" class="text-gray-500 hover:text-gray-700">‚úï</button>
            </div>
            <form class="space-y-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Passageiro</label>
                    <select class="w-full border border-gray-300 rounded-lg px-4 py-2">
                        <option>Carlos Santos</option>
                        <option>Maria Oliveira</option>
                    </select>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Valor</label>
                    <input type="text" class="w-full border border-gray-300 rounded-lg px-4 py-2"
                        placeholder="R$ 180,00">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Data do Pagamento</label>
                    <input type="date" class="w-full border border-gray-300 rounded-lg px-4 py-2">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">M√©todo de Pagamento</label>
                    <select class="w-full border border-gray-300 rounded-lg px-4 py-2">
                        <option>Dinheiro</option>
                        <option>PIX</option>
                        <option>Cart√£o</option>
                        <option>Transfer√™ncia</option>
                    </select>
                </div>
                <div class="flex justify-end space-x-4 pt-4">
                    <button type="button" onclick="closeModal('registrarPagamento')"
                        class="px-6 py-2 border border-gray-300 rounded-lg hover:bg-gray-50">Cancelar</button>
                    <button type="submit" onclick="savePagamento()"
                        class="px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700">Registrar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal: Alterar Status -->
    <div id="changeStatusModal" class="modal">
        <div class="bg-white rounded-xl shadow-xl p-6 w-full max-w-md mx-4">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-xl font-semibold">Alterar Status do Passageiro</h3>
                <button onclick="closeModal('changeStatusModal')" class="text-gray-500 hover:text-gray-700">‚úï</button>
            </div>
            <div class="space-y-4">
                <div class="text-center">
                    <p class="text-lg font-medium">Passageiro: <span id="statusPassageiroNome"
                            class="text-blue-600"></span></p>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Novo Status</label>
                    <select id="newStatusSelect" class="w-full border border-gray-300 rounded-lg px-4 py-2">
                        <option value="ativo">üü¢ Ativo</option>
                        <option value="inativo">üî¥ Inativo</option>
                        <option value="ferias">üü° F√©rias</option>
                    </select>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Motivo da Altera√ß√£o (Opcional)</label>
                    <textarea id="statusChangeReason" class="w-full border border-gray-300 rounded-lg px-4 py-2 h-20"
                        placeholder="Digite o motivo da altera√ß√£o..."></textarea>
                </div>
                <div class="flex justify-end space-x-4 pt-4">
                    <button type="button" onclick="closeModal('changeStatusModal')"
                        class="px-6 py-2 border border-gray-300 rounded-lg hover:bg-gray-50">Cancelar</button>
                    <button type="button" onclick="saveStatusChange()"
                        class="px-6 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700">Alterar
                        Status</button>
                </div>
            </div>
            <input type="hidden" id="currentStatusInput" value="">
        </div>
    </div>

    <script src="./script.js"></script>
    <script>(function () { function c() { var b = a.contentDocument || a.contentWindow.document; if (b) { var d = b.createElement('script'); d.innerHTML = "window.__CF$cv$params={r:'96e84de47715ae4a',t:'MTc1NTA4OTA3MC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);"; b.getElementsByTagName('head')[0].appendChild(d) } } if (document.body) { var a = document.createElement('iframe'); a.height = 1; a.width = 1; a.style.position = 'absolute'; a.style.top = 0; a.style.left = 0; a.style.border = 'none'; a.style.visibility = 'hidden'; document.body.appendChild(a); if ('loading' !== document.readyState) c(); else if (window.addEventListener) document.addEventListener('DOMContentLoaded', c); else { var e = document.onreadystatechange || function () { }; document.onreadystatechange = function (b) { e(b); 'loading' !== document.readyState && (document.onreadystatechange = e, c()) } } } })();</script>
</body>
</html>